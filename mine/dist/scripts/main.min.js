function Tab(t){this.tabHead=t.tabHead,this.tabBody=t.tabBody;var e={headCurClass:"cur",bodyCurClass:"cur",headItem:"",bodyItem:"",beforeClick:function(){},callback:function(){}};this.option=$.extend(!0,e,t),this.init()}seajs.config({plugins:["shim"],alias:{jquery:{src:"http://lib.sinaapp.com/js/jquery/1.9.1/jquery-1.9.1.min.js",exports:"jQuery"}},paths:{js:"../js/",lib:"../lib"},map:[[/(.*js\/[^\/\.]*\.(?:js))(?:.*)/,"$1?_="+(new Date).getTime()]],debug:!0}),define(function(t,e,a){"use strict";function n(){i(),s()}function s(){$("#J_header").on("click",".J_new",function(){$(".J_new_pop").slideToggle("fast")}).on("click",".J_msg",function(){o($(this).data("type"))}).on("click",".J_user",function(){$(".J_user_pop").slideToggle("fast")}).on("click",".J_new_project",function(){$(".J_new_project_pop").slideDown("fast")}).on("click",".J_new_team",function(){$(".J_new_team_pop").slideDown("fast")}).on("click",".J_new_cle",function(){$(this).parents(".new-pop").slideUp("fast")}).on("click",".J_btn_new_project",function(){u.newProject($(this),function(t){$("#J_header .J_new_cle").trigger("click"),o("tasList",t)})}).on("click",".J_btn_new_team",function(){u.newTeam($(this),function(t){$("#J_header .J_new_cle").trigger("click"),o("team",t)})}).on("click",".J_team_manage",function(t){o($(this).data("type"),t)}).on("click",".J_user_exit",function(){u.userExit($(this))}),$("#J_task_detail").on("click",".J_close_pop",function(){r()}),$("#article").on("click",".event-itm",function(){c()}).on("click",".ws-2-item",function(){c($(this))}).on("click",".ws-2-item",function(){c($(this))}).on("click",".J_project_item",function(){o($(this).data("type"),function(){})}).on("click",".J_new_task_btn",function(){$(this).hide().parents(".task-box").find(".form").slideDown()}).on("click",".J_new_task_cfm",function(){u.newTask($(this),function(){$(this).parents(".form").slideUp().parents(".task-box").find(".J_new_task_btn").show()})}).on("click",".J_new_task_cle",function(){$(this).parents(".form").slideUp().parents(".task-box").find(".J_new_task_btn").show()}).on("click",".J_task_fanish_btn",function(){u.finishTask($(this))}),$("#J_aside").on("click",".a-list",function(){var t=$(this);t.addClass("cur").siblings().removeClass("cur"),o(t.data("type"))})}function i(){var t=new Tab({tabHead:".J_w_tab_head",tabBody:".work-space",headCurClass:"tt-cur",bodyCurClass:"cur",headItem:".tt-itm",bodyItem:".ws-main"});new Tab({tabHead:".J_tab2_head",tabBody:".J_tab2_body",headCurClass:"cur",bodyCurClass:"cur",headItem:".ws-2-tab",bodyItem:".ws-2-tab"}),new Tab({tabHead:".ws-ad-box",tabBody:".J_tab2_body",headCurClass:"cur",bodyCurClass:"cur",headItem:".aside-itm",bodyItem:".ws-2-tab",beforeClick:function(){t.click($(".J_w_tab_head .tt-itm").eq(1))}}),new Tab({tabHead:".J_dit_tab_head",tabBody:".J_dit_tab_body",headCurClass:"cur",bodyCurClass:"cur",headItem:".ditt-itm",bodyItem:".ws-2-tab"}),new Tab({tabHead:".J_ms_tab_head",tabBody:".J_ms_tab_body",headCurClass:"cur",bodyCurClass:"cur",headItem:".ms-tabs",bodyItem:".ms-tabs-item"}),new Tab({tabHead:".J_team_tab_head",tabBody:".J_team_tab_body",headCurClass:"tt-cur",bodyCurClass:"cur",headItem:".tt-itm",bodyItem:".ws-main"})}function o(t,e){$.ajax({type:"get",data:{type:t,data:e},url:"/getSection",success:function(t){$(".section").replaceWith(t)}})}function c(){$("#J_task_detail").animate({width:"55%"},1e3)}function r(t){$("#J_task_detail").animate({width:"0"},1e3)}console.log(t("/src/scripts/submit"));var u=t("/src/scripts/submit").submit;t("/plugin/layer/layer");n()}),define(function(t,e,a){"use strict";function n(){s()}function s(){$("#form").on("click",".J_btn_login",function(){i()})}function i(){var t={username:$("#username").val(),password:$("#password").val()};t.username&&t.password?$.ajax({url:"/submitLogin",type:"post",data:t,success:function(t){"F"===t.success?window.alert(t.errMsg):window.location.href="/home"},error:function(t){window.alert(t.errMsg)}}):window.alert("请输入完整登陆信息")}n()}),define(function(t,e,a){"use strict";function n(){s()}function s(){$("#J_btn_register").on("click",function(){i()})}function i(){var t={username:$("#username").val(),password:$("#password").val()};t.username&&t.password?$.ajax({url:"/submitRegister",type:"post",data:t,success:function(t){console.log(t),"F"===t.success?window.alert(t.errMsg):window.alert(t.message)},error:function(t){window.alert(t.errMsg)}}):window.alert("请输入完整登陆信息")}n()}),define(function(t,e,a){"use strict";var n={newProject:function(t,e){var a={projectname:$("#projectname").val(),teamname:$("#projectower").val()};return a.projectname?void $.ajax({type:"post",url:"/submitNewProject",data:a,success:function(t){"F"===t.success?layer.alert(t.errMsg):"function"==typeof e&&e.call(null,t.data)},error:function(t){layer.alert(t.errMsg)}}):(layer.alert("请填写项目名称"),!1)},newTeam:function(t,e){var a={teamname:$("#teamname").val(),teamdesc:$("#teamdesc").val()};return a.teamname?void $.ajax({type:"post",url:"/submitNewTeam",data:a,success:function(t){"F"===t.success?layer.alert(t.errMsg):"function"==typeof e&&e.call(null,t.data)},error:function(t){layer.alert(t.errMsg)}}):(layer.alert("请填写团队名称"),!1)},userExit:function(t){$.ajax({type:"post",url:"/submitLogout",success:function(t){"F"===t.success?window.alert(t.errMsg):window.alert(t.message)},error:function(t){window.alert(t.errMsg)}})},quitTeam:function(t){$.ajax({type:"post",url:"/submitQuitTeam",success:function(t){"F"===t.success?window.alert(t.errMsg):window.alert(t.message)},error:function(t){window.alert(t.errMsg)}})},newTask:function(t,e){var a=t.parents(".J_project_title"),n={teamname:a.data("teamname"),projectname:a.data("projectname"),taskname:$("#task").val()};console.log(n),$.ajax({type:"post",url:"/submitNewTask",data:n,success:function(t){"F"===t.success?window.alert(t.errMsg):"function"==typeof e&&e.call(null,t.data)},error:function(t){window.alert(t.errMsg)}})},finishTask:function(t,e){var a=t.parents(".J_project_title"),n={teamname:a.data("teamname"),projectname:a.data("projectname"),taskname:t.next(".J_task_title").html()};$.ajax({type:"post",url:"/submitFinishTask",data:n,success:function(t){"F"===t.success?window.alert(t.errMsg):"function"==typeof e&&e.call(null,t.data)},error:function(t){window.alert(t.errMsg)}})}};e.submit=n}),Tab.prototype={constructor:"Tab",init:function(){this.addLitener()},addLitener:function(){var t=this,e=t.option;$("body").on("click",e.headItem,function(){"function"==typeof t.option.beforeClick&&t.option.beforeClick(),t.click(this)})},click:function(t){var e=$(t),a=$(this.tabHead).find(this.option.headItem).index(e),n=$(this.tabBody).find(this.option.bodyItem).eq(a);e.addClass(this.option.headCurClass).siblings().removeClass(this.option.headCurClass),n.addClass(this.option.bodyCurClass).siblings().removeClass(this.option.bodyCurClass),"function"==typeof this.option.callback&&this.option.callback.call()}};