function Tab(t){this.tabHead=t.tabHead,this.tabBody=t.tabBody;var e={headCurClass:"cur",bodyCurClass:"cur",headItem:"",bodyItem:"",beforeClick:function(){},callback:function(){}};this.option=$.extend(!0,e,t),this.init()}seajs.config({plugins:["shim"],alias:{jquery:{src:"http://lib.sinaapp.com/js/jquery/1.9.1/jquery-1.9.1.min.js",exports:"jQuery"}},paths:{js:"../js/",lib:"../lib"},map:[[/(.*js\/[^\/\.]*\.(?:js))(?:.*)/,"$1?_="+(new Date).getTime()]],debug:!0}),define(function(t,e,a){"use strict";function n(){o(),s()}function s(){$("#J_header").on("click",".J_new",function(){$(".J_new_pop").slideToggle("fast")}).on("click",".J_msg",function(){i($(this).data("type"))}).on("click",".J_user",function(){$(".J_user_pop").slideToggle("fast")}).on("click",".J_new_project",function(){$(".J_new_project_pop").slideDown("fast")}).on("click",".J_new_team",function(){$(".J_new_team_pop").slideDown("fast")}).on("click",".J_new_cle",function(){$(this).parents(".new-pop").slideUp("fast")}).on("click",".J_btn_new_project",function(){l.newProject($(this),function(t){$("#J_header .J_new_cle").trigger("click"),i("tasList",t)})}).on("click",".J_btn_new_team",function(){l.newTeam($(this),function(t){$("#J_header .J_new_cle").trigger("click"),i("team",t),console.log(t);var e=$("#projectower");if(e.length)e.append('<option value="'+t.teamId+'">'+t.teamname+"</option>");else{var a='<select class="new-select" name="projectower" id="projectower"><option value=="'+t.teamId+'">'+t.teamname+"</option></select>";$("#J_team_list").append(a).find("p").remove(),$(".J_btn_new_project").removeAttr("disabled")}})}).on("click",".J_team_manage",function(){i($(this).data("type"))}).on("click",".J_user_exit",function(){l.userExit($(this))}),$("#J_task_detail").on("click",".J_close_pop",function(){r()}),$("#article").on("click",".event-itm",function(){c()}).on("click",".ws-2-item",function(){c($(this))}).on("click",".ws-2-item",function(){c($(this))}).on("click",".J_project_item",function(){var t=$(this);console.log(t);var e={teamId:t.data("teamid"),projectId:t.data("projectid")};console.log("114data",e),i($(this).data("type"),e)}).on("click",".J_new_task_btn",function(){$(this).hide().parents(".task-box").find(".form").slideDown()}).on("click",".J_new_task_cfm",function(){l.newTask($(this),function(t){var e='<li><input type="checkbox" class="task-fanish J_task_fanish_btn"><span class="J_task_title" data-taskId='+t.taskId+">"+t.taskname+'</span><span class="glyphicon glyphicon-remove"></span></li>';$(this).parents(".form").slideUp().parents(".task-box").find(".J_new_task_btn").show(),$(this).siblings(".task-status").after(e)})}).on("click",".J_new_task_cle",function(){$(this).parents(".form").slideUp().parents(".task-box").find(".J_new_task_btn").show()}).on("click",".J_task_fanish_btn",function(){l.finishTask($(this))}),$("#J_aside").on("click",".a-list",function(){var t=$(this);t.addClass("cur").siblings().removeClass("cur"),i(t.data("type"))})}function o(){var t=new Tab({tabHead:".J_w_tab_head",tabBody:".work-space",headCurClass:"tt-cur",bodyCurClass:"cur",headItem:".tt-itm",bodyItem:".ws-main"});new Tab({tabHead:".J_tab2_head",tabBody:".J_tab2_body",headCurClass:"cur",bodyCurClass:"cur",headItem:".ws-2-tab",bodyItem:".ws-2-tab"}),new Tab({tabHead:".ws-ad-box",tabBody:".J_tab2_body",headCurClass:"cur",bodyCurClass:"cur",headItem:".aside-itm",bodyItem:".ws-2-tab",beforeClick:function(){t.click($(".J_w_tab_head .tt-itm").eq(1))}}),new Tab({tabHead:".J_dit_tab_head",tabBody:".J_dit_tab_body",headCurClass:"cur",bodyCurClass:"cur",headItem:".ditt-itm",bodyItem:".ws-2-tab"}),new Tab({tabHead:".J_ms_tab_head",tabBody:".J_ms_tab_body",headCurClass:"cur",bodyCurClass:"cur",headItem:".ms-tabs",bodyItem:".ms-tabs-item"}),new Tab({tabHead:".J_team_tab_head",tabBody:".J_team_tab_body",headCurClass:"tt-cur",bodyCurClass:"cur",headItem:".tt-itm",bodyItem:".ws-main"})}function i(t,e){console.log({type:t,data:e}),$.ajax({type:"get",data:{type:t,data:e},datatype:"json",url:"/getSection",success:function(t){$(".section").replaceWith(t)}})}function c(){$("#J_task_detail").animate({width:"55%"},1e3)}function r(t){$("#J_task_detail").animate({width:"0"},1e3)}console.log(t("/src/scripts/submit"));var l=t("/src/scripts/submit").submit;t("/plugin/layer/layer");n()}),define(function(t,e,a){"use strict";function n(){s()}function s(){$("#form").on("click",".J_btn_login",function(){o()})}function o(){var t={username:$("#username").val(),password:$("#password").val()};t.username&&t.password?$.ajax({url:"/submitLogin",type:"post",data:t,success:function(t){"F"===t.success?window.alert(t.errMsg):window.location.href="/home"},error:function(t){window.alert(t.errMsg)}}):window.alert("请输入完整登陆信息")}n()}),define(function(t,e,a){"use strict";function n(){s()}function s(){$("#J_btn_register").on("click",function(){o()})}function o(){var t={username:$("#username").val(),password:$("#password").val()};t.username&&t.password?$.ajax({url:"/submitRegister",type:"post",data:t,success:function(t){console.log(t),"F"===t.success?window.alert(t.errMsg):window.location.href="/login"},error:function(t){window.alert(t.errMsg)}}):window.alert("请输入完整登陆信息")}n()}),define(function(t,e,a){"use strict";var n={newProject:function(t,e){var a={projectname:$("#projectname").val(),teamId:$("#projectower").val()};return a.projectname?void $.ajax({type:"post",url:"/submitNewProject",data:a,success:function(t){"F"===t.success?window.alert(t.errMsg):"function"==typeof e&&e.call(null,t.data)},error:function(t){layer.alert(t.errMsg)}}):(layer.alert("请填写项目名称"),!1)},newTeam:function(t,e){var a={teamname:$("#teamname").val(),teamdesc:$("#teamdesc").val()};return a.teamname?void $.ajax({type:"post",url:"/submitNewTeam",data:a,success:function(t){"F"===t.success?layer.alert(t.errMsg):"function"==typeof e&&e.call(null,t.data)},error:function(t){layer.alert(t.errMsg)}}):(layer.alert("请填写团队名称"),!1)},userExit:function(t){$.ajax({type:"post",url:"/submitLogout",success:function(t){"F"===t.success?window.alert(t.errMsg):window.alert(t.message)},error:function(t){window.alert(t.errMsg)}})},quitTeam:function(t){({teamId:t.data("teamId")});$.ajax({type:"post",url:"/submitQuitTeam",success:function(t){"F"===t.success?window.alert(t.errMsg):window.alert(t.message)},error:function(t){window.alert(t.errMsg)}})},newTask:function(t,e){var a=t.parents(".J_project_title"),n={teamId:a.data("teamid"),projectId:a.data("projectid"),taskname:$("#task").val(),status:a.data("status")};console.log(n),$.ajax({type:"post",url:"/submitNewTask",data:n,success:function(t){"F"===t.success?window.alert(t.errMsg):"function"==typeof e&&(console.log(e),e(t.data))},error:function(t){window.alert(t.errMsg)}})},finishTask:function(t,e){var a=t.parents(".J_project_title"),n={teamname:a.data("teamname"),projectname:a.data("projectname"),taskname:t.next(".J_task_title").html()};$.ajax({type:"post",url:"/submitFinishTask",data:n,success:function(t){"F"===t.success?window.alert(t.errMsg):"function"==typeof e&&e.call(null,t.data)},error:function(t){window.alert(t.errMsg)}})}};e.submit=n}),Tab.prototype={constructor:"Tab",init:function(){this.addLitener()},addLitener:function(){var t=this,e=t.option;$("body").on("click",e.headItem,function(){"function"==typeof t.option.beforeClick&&t.option.beforeClick(),t.click(this)})},click:function(t){var e=$(t),a=$(this.tabHead).find(this.option.headItem).index(e),n=$(this.tabBody).find(this.option.bodyItem).eq(a);e.addClass(this.option.headCurClass).siblings().removeClass(this.option.headCurClass),n.addClass(this.option.bodyCurClass).siblings().removeClass(this.option.bodyCurClass),"function"==typeof this.option.callback&&this.option.callback.call()}};